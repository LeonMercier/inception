http {

	index index.php;

	server {

		server_name = lemercie.42.fr; #TODO get from variable
		root /usr/share/webapps/wordpress;

		listen *:443 ssl;
		listen [::]:443 ssl;
		http2 on;

		ssl_certificate /etc/nginx/ssl/certificate.crt;
		ssl_certificate_key /etc/nginx/ssl/certificate.key;

		location / {
			try_files $uri $uri/ /index.php?$args;
		}
	
		# regexp are introduced with ~
		location ~ \.php$ {
			fastcgi_pass  wordpress:9000;
	        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    	    fastcgi_param QUERY_STRING    $query_string;
		}
	}
}
		
